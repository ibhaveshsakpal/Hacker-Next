{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from \"isomorphic-fetch\";\nimport StoryList from \"../components/StoryList\";\nimport Layout from \"../components/Layout\";\nimport Link from \"next/link\";\n\nconst Index = ({\n  stories,\n  page\n}) => {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.register('/service-worker.js').then(register => {\n      console.log(\"Success!\", register);\n    }).catch(err => {\n      console.log(\"Failed! \", err);\n    });\n  }\n\n  return __jsx(Layout, {\n    title: \"Hacker Next\",\n    description: \"A Hacker News clone made in Next.js\"\n  }, __jsx(StoryList, {\n    stories: stories\n  }), __jsx(\"footer\", null, __jsx(Link, {\n    href: `/?page=${page + 1}`\n  }, __jsx(\"a\", null, \" Next page (\", page + 1, \") \"))), __jsx(\"style\", {\n    js: true\n  }, `\n\n        footer {\n          padding: 1em;\n        }\n\n        footer a {\n          font-weight: bold;\n          color: black;\n          text-decoration: none;\n        }\n      `));\n};\n\nIndex.getInitialProps = async ({\n  req,\n  res,\n  query\n}) => {\n  let stories;\n  let page = Number(query.page) || 1;\n\n  try {\n    const response = await fetch(`https://node-hnapi.herokuapp.com/news?page=${page}`);\n    stories = await response.json();\n  } catch (err) {\n    console.log(err);\n    stories = [];\n  }\n\n  return {\n    stories,\n    page\n  };\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}