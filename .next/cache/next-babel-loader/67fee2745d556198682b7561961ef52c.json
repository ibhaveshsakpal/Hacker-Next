{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from \"isomorphic-fetch\";\nimport { useEffect } from \"react\";\n\nconst Scroll = ({\n  data: data\n}) => {\n  useEffect(() => {\n    const targets = document.querySelectorAll('img');\n    console.log(targets);\n    window.addEventListener('scroll', event => {\n      targets.forEach(target => {\n        const rect = target.getBoundingClientRect().top;\n\n        if (rect <= window.innerHeight) {\n          const src = target.getAttribute('data-lazy');\n          target.setAttribute('src', src);\n          target.classList.add('fade');\n        }\n      });\n    });\n  });\n  return __jsx(\"div\", null, __jsx(\"h2\", null, \" Images \"), data.map((img, index) => __jsx(\"div\", {\n    key: index\n  }, __jsx(\"img\", {\n    loading: \"lazy\",\n    \"data-lazy\": img.flag\n  }), __jsx(\"p\", null, img.name))));\n};\n\nScroll.getInitialProps = async () => {\n  try {\n    const images = await fetch(\"https://restcountries.eu/rest/v2/all\");\n    const res = await images.json();\n    return {\n      data: res\n    };\n  } catch (err) {\n    console.log(\"Something went wrong!\", err);\n  }\n};\n\nexport default Scroll;","map":null,"metadata":{},"sourceType":"module"}